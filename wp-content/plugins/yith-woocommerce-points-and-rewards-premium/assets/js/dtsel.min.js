!function(){"use strict";var e=["DAYS","MONTHS","YEARS"],t=["January","February","March","April","May","June","July","August","September","October","November","December"],n=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];function i(t,n){n=n||{};var i={defaultView:e[0],dateFormat:"yyyy-mm-dd",timeFormat:"HH:MM:SS",showDate:!0,showTime:!1,paddingX:5,paddingY:5,direction:"TOP"};if(!t)throw TypeError("input element or selector required for contructor");if(Object.getPrototypeOf(t)===String.prototype){var r=document.querySelectorAll(t);if(!r[0])throw Error('"'+t+'" not found.');t=r[0]}this.config=m(n,i),this.dateFormat=this.config.dateFormat,this.timeFormat=this.config.timeFormat,this.dateFormatRegEx=new RegExp("yyyy|yy|mm|dd","gi"),this.timeFormatRegEx=new RegExp("hh|mm|ss|a","gi"),this.inputElem=t,this.dtbox=null,this.setup()}function r(e,n){var i=this,r={},a={};function s(e,t){return{get:function(){var n=a[e];return void 0===n?t:n},set:function(t){var n=i.state,s=r[e]||[];a[e]=t;for(var o=0;o<s.length;o++)s[o].bind(i)(a,n)}}}Object.defineProperties(this,{visible:s("visible",!1),bodyType:s("bodyType",n.config.defaultView),value:s("value"),year:s("year",0),month:s("month",0),day:s("day",0),hours:s("hours",0),minutes:s("minutes",0),seconds:s("seconds",0),cancelBlur:s("cancelBlur",0),addHandler:{value:function(e,t){if(!e||!t)return!1;r[e]||(r[e]=[]),r[e].push(t)}},month_long:{get:function(){return t[i.month]}},month_short:{get:function(){return i.month_long.slice(0,3)}},state:{get:function(){return Object.assign({},a)}},time:{get:function(){return 60*i.hours*60*1e3+60*i.minutes*1e3+1e3*i.seconds}}}),this.el={},this.settings=n,this.elem=e,this.setup()}function a(e){var t=e.getBoundingClientRect(),n=void 0!==window.pageXOffset?window.pageXOffset:(document.documentElement||document.body.parentNode||document.body).scrollLeft,i=void 0!==window.pageYOffset?window.pageYOffset:(document.documentElement||document.body.parentNode||document.body).scrollTop;return{left:t.left+n,top:t.top+i}}function s(e){for(;e.children.length;)e.removeChild(e.children[0])}function o(e,t){try{return t.appendChild(e),e}catch(e){console.trace(e)}}function l(){this._funcs={}}function d(e,t,n,i){var r,a,s={canSkip:new l,updateValue:new l},o=(r=Object.keys(n),a=t,r.sort((function(e,t){var n=a.indexOf(e),i=a.indexOf(t),r=0;return n<i?r=-1:i<n?r=1:e.length>t.length?r=-1:t.length>e.length&&(r=1),r}))),d=function(e,t){for(var n=[],i=0,r=0;r<e.length;r++){var a=e[r];t.slice(i).indexOf(a)>-1&&(i+=a.length,n.push(a))}return n}(o,t),u=0;i&&i(s);for(var h=0;h<o.length;h++){var c=o[h],p=t.indexOf(c),f=u,y=null,m=!1,v=s.canSkip.get(c);u=u||p;for(var g=0;g<v.length;g++)if(v[g](n)){m=!0;break}if(p>-1&&!m){var b=null,w=u+c.length,T=-1,x=h+1;for(f+=c.length;-1==T&&x<o.length;){var S=o[x];x+=1,-1!==d.indexOf(S)&&(T=S?t.indexOf(S):-1)}if(T>-1&&(b=t.slice(w,T))){var E=e.slice(u).indexOf(b);E&&E>-1&&(f=(w=E+u)+b.length)}y=parseInt(e.slice(u,w));v=s.updateValue.get(c);for(var O=0;O<v.length;O++)y=v[O](y,n,u,w)}n[c]={index:u,value:y},u=f}return n}function u(e,t){var n={yyyy:null,yy:null,mm:null,dd:null},i=(t.dateFormat||"").toLowerCase();if(!i)throw new TypeError("dateFormat not found ("+t.dateFormat+")");var r=(n=d(e,i,n,(function(e){e.canSkip.add("yy",(function(e){return e.yyyy.value})),e.updateValue.add("yy",(function(e){return 100*Math.floor((new Date).getFullYear()/100)+e}))}))).yyyy.value||n.yy.value,a=n.mm.value-1,s=n.dd.value;return new Date(r,a,s)}function h(e,t){var n=(t.timeFormat||"").toLowerCase();if(!n)throw new TypeError("timeFormat not found ("+t.timeFormat+")");var i,r=(i=d(e,n,i={hh:null,mm:null,ss:null,a:null},(function(t){t.updateValue.add("a",(function(t,n,i,r){return e.slice(i,i+2)}))}))).hh.value,a=i.mm.value,s=i.ss.value,o=i.a.value,l=o?o.toLowerCase():o;return o&&["am","pm"].indexOf(l)>-1&&("am"==l&&12==r?r=0:"pm"==l&&(r+=12)),60*r*60*1e3+60*a*1e3+1e3*s}function c(e,t){var n=t.dateFormat.toLowerCase(),i=e.getDate(),r=e.getMonth()+1,a=e.getFullYear(),s=a%100,o={dd:i<10?"0"+i:i,mm:r<10?"0"+r:r,yyyy:a,yy:s<10?"0"+s:s};return n.replace(t.dateFormatRegEx,(function(e){return o[e]}))}function p(e,t){var n=t.timeFormat,i=n.toLowerCase(),r=e.getHours(),a=e.getMinutes(),s=e.getSeconds(),o=null,l=null;i.indexOf("a")>-1&&(o=r>=12?"pm":"am",o=n.indexOf("A")>-1?o.toUpperCase():o,l=0==r?"12":r>12?r%12:r);var d={hh:o?l:r<10?"0"+r:r,mm:a<10?"0"+a:a,ss:s<10?"0"+s:s,a:o};return i.replace(t.timeFormatRegEx,(function(e){return d[e]}))}function f(e,t){return!(!e||!t)&&(e.getFullYear()==t.getFullYear()&&e.getMonth()==t.getMonth()&&e.getDate()==t.getDate())}function y(e,t,n){n=n||0;var i=""+(parseInt(e)||n),r=Math.max(t,i.length)-i.length;return(""+n).repeat(r)+i}function m(e,t){for(var n=Object.keys(t),i=0;i<n.length;i++){var r=n[i];Object.prototype.hasOwnProperty.call(e,r)||(e[r]=t[r])}return e}i.prototype.setup=function(){var e=this.inputElemHandler.bind(this);this.inputElem.addEventListener("focus",e,!1),this.inputElem.addEventListener("blur",e,!1)},i.prototype.inputElemHandler=function(e){if("focus"==e.type)this.dtbox||(this.dtbox=new r(e.target,this)),this.dtbox.visible=!0;else if("blur"==e.type&&this.dtbox&&this.dtbox.visible){var t=this;setTimeout((function(){t.dtbox.cancelBlur>0?t.dtbox.cancelBlur-=1:(t.dtbox.visible=!1,t.inputElem.blur())}),100)}},r.prototype.setup=function(){Object.defineProperties(this.el,{wrapper:{value:null,configurable:!0},header:{value:null,configurable:!0},body:{value:null,configurable:!0},footer:{value:null,configurable:!0}}),this.setupWrapper(),this.settings.config.showDate&&(this.setupHeader(),this.setupBody()),this.settings.config.showTime&&this.setupFooter();var e=this;this.addHandler("visible",(function(t,n){if(t.visible&&!n.visible){document.body.appendChild(this.el.wrapper);var i=e.elem.value.split(/\s*,\s*/),r=void 0,a=0;e.settings.config.showDate&&(r=u(i[0],e.settings)),e.settings.config.showTime&&(a=(a=h(i[i.length-1],e.settings))||0),r&&r.getTime()||(r=new Date,r=new Date(r.getFullYear(),r.getMonth(),r.getDate()));var s=new Date(r.getTime()+a);e.value=s,e.year=s.getFullYear(),e.month=s.getMonth(),e.day=s.getDate(),e.hours=s.getHours(),e.minutes=s.getMinutes(),e.seconds=s.getSeconds(),e.settings.config.showDate&&(e.setHeaderContent(),e.setBodyContent()),e.settings.config.showTime&&e.setFooterContent()}else!t.visible&&n.visible&&document.body.removeChild(this.el.wrapper)}))},r.prototype.setupWrapper=function(){if(!this.el.wrapper){var e=document.createElement("div");e.classList.add("date-selector-wrapper"),Object.defineProperty(this.el,"wrapper",{value:e})}var t=this,n=document.getElementsByTagName("html")[0];function i(e){var i=a(t.elem),r=t.settings.config,s=r.paddingY||5,o=r.paddingX||5,l=i.top+t.elem.offsetHeight+s,d=i.left+o,u=n.clientHeight-i.top+s;t.el.wrapper.style.left=`${d}px`,i.top>300&&"BOTTOM"!=r.direction?(t.el.wrapper.style.bottom=`${u}px`,t.el.wrapper.style.top=""):(t.el.wrapper.style.top=`${l}px`,t.el.wrapper.style.bottom="")}function r(e){t.cancelBlur+=1,setTimeout((function(){t.elem.focus()}),50)}i(),this.setPosition=i,this.el.wrapper.addEventListener("mousedown",r,!1),this.el.wrapper.addEventListener("touchstart",r,!1),window.addEventListener("resize",this.setPosition)},r.prototype.setupHeader=function(){if(!this.el.header){var e=document.createElement("div"),t=["cal-nav-prev","cal-nav-current","cal-nav-next"];e.classList.add("cal-header");for(var n=0;n<3;n++){var i=document.createElement("div");i.classList.add("cal-nav",t[n]),i.onclick=this.onHeaderChange.bind(this),e.appendChild(i)}e.children[0].innerHTML="&lt;",e.children[2].innerHTML="&gt;",Object.defineProperty(this.el,"header",{value:e}),o(e,this.el.wrapper)}this.setHeaderContent()},r.prototype.setHeaderContent=function(){var e=this.year;if("DAYS"==this.bodyType)e=this.month_long+" "+e;else if("YEARS"==this.bodyType){var t=this.year+10-this.year%10;e=t-10+"-"+(t-1)}this.el.header.children[1].innerText=e},r.prototype.setupBody=function(){if(!this.el.body){var e=document.createElement("div");e.classList.add("cal-body"),Object.defineProperty(this.el,"body",{value:e}),o(e,this.el.wrapper)}var i=null;function r(e,t,n,i,r){var a=document.createElement("div");a.classList.add(n);for(var s=1;s<e+1;s++){var o=document.createElement("div");o.classList.add("cal-row","cal-row-"+s),1==s&&i&&o.classList.add(i);for(var l=1;l<t+1;l++){var d=document.createElement("div");d.classList.add("cal-cell","cal-col-"+l),d.onclick=r,o.appendChild(d)}a.appendChild(o)}return a}if("DAYS"==this.bodyType){if(!(i=this.el.body.calDays)){i=r(7,7,"cal-days","cal-day-names",this.onDateSelected.bind(this));for(var a=0;a<7;a++){var l=i.children[0].children[a];l.innerText=n[a].slice(0,2),l.onclick=null}this.el.body.calDays=i}}else if("MONTHS"==this.bodyType){if(!(i=this.el.body.calMonths)){i=r(3,4,"cal-months",null,this.onMonthSelected.bind(this));for(a=0;a<3;a++)for(var d=0;d<4;d++){var u=t[4*a+d].slice(0,3);i.children[a].children[d].innerText=u}this.el.body.calMonths=i}}else"YEARS"==this.bodyType&&((i=this.el.body.calYears)||(i=r(3,4,"cal-years",null,this.onYearSelected.bind(this)),this.el.body.calYears=i));s(this.el.body),o(i,this.el.body),this.setBodyContent()},r.prototype.setBodyContent=function(){var e=this.el.body.children[0],t=["cal-cell-prev","cal-cell-next","cal-value"];if("DAYS"==this.bodyType){var n=864e5,i=new Date(this.year,this.month,1),r=new Date(i.getTime()-n*i.getDay());e.children[6].style.display="";for(var a=1;a<7;a++)for(var s=0;s<7;s++){var o=e.children[a].children[s],l=r.getMonth(),d=r.getDate();if(o.innerText=d,o.classList.remove(t[0],t[1],t[2]),l!=this.month){if(6==a&&0==s){e.children[6].style.display="none";break}o.classList.add(l<this.month?t[0]:t[1])}else f(r,this.value)&&o.classList.add(t[2]);r=new Date(r.getTime()+n)}}else if("YEARS"==this.bodyType){var u=this.year-this.year%10-1;for(a=0;a<3;a++)for(s=0;s<4;s++)e.children[a].children[s].innerText=u,u+=1;e.children[0].children[0].classList.add(t[0]),e.children[2].children[3].classList.add(t[1])}},r.prototype.onTimeChange=function(e){if(e.stopPropagation(),"mousedown"!=e.type){var t=e.target;if(this[t.name]=parseInt(t.value)||0,this.setupFooter(),"change"==e.type){var n=this;setTimeout((function(){n.elem.focus()}),50)}this.setInputValue()}else this.cancelBlur+=1},r.prototype.setupFooter=function(){if(!this.el.footer){var e=document.createElement("div"),t=this.onTimeChange.bind(this),n=this;function i(t,i,r,a){var s=document.createElement("div");s.classList.add("cal-time");var o=s.appendChild(document.createElement("div"));o.classList.add("cal-time-label"),o.innerText=t;var l=s.appendChild(document.createElement("div"));l.classList.add("cal-time-value"),l.innerText="00";var d=s.appendChild(document.createElement("div")),u=d.appendChild(document.createElement("input"));Object.assign(u,{step:1,min:0,max:r,name:i,type:"range"}),Object.defineProperty(e,i,{value:u}),d.classList.add("cal-time-slider"),u.onchange=a,u.oninput=a,u.onmousedown=a,n[i]=n[i]||parseInt(u.value)||0,e.appendChild(s)}i("HH:","hours",23,t),i("MM:","minutes",59,t),i("SS:","seconds",59,t),e.classList.add("cal-footer"),Object.defineProperty(this.el,"footer",{value:e}),o(e,this.el.wrapper)}this.setFooterContent()},r.prototype.setFooterContent=function(){if(this.el.footer){var e=this.el.footer;e.hours.value=this.hours,e.children[0].children[1].innerText=y(this.hours,2),e.minutes.value=this.minutes,e.children[1].children[1].innerText=y(this.minutes,2),e.seconds.value=this.seconds,e.children[2].children[1].innerText=y(this.seconds,2)}},r.prototype.setInputValue=function(){var e=new Date(this.year,this.month,this.day),t=[];if(this.settings.config.showDate&&t.push(c(e,this.settings)),this.settings.config.showTime){var n=new Date(e.getTime()+this.time);t.push(p(n,this.settings))}this.elem.value=t.join(", ")},r.prototype.onDateSelected=function(e){var t=e.target.parentNode,n=parseInt(e.target.innerText);t.nextSibling&&t.nextSibling.nextSibling||!(n<8)?t.previousSibling&&t.previousSibling.previousSibling||!(n>7)||(this.month-=1):this.month+=1,this.day=parseInt(e.target.innerText),this.value=new Date(this.year,this.month,this.day),this.setInputValue(),this.setHeaderContent(),this.setBodyContent()},r.prototype.onMonthSelected=function(e){var t=0,n=2,i=e.target;i.parentNode.nextSibling&&(n=i.parentNode.previousSibling?1:0),i.previousSibling&&(t=3,i.nextSibling&&(t=i.previousSibling.previousSibling?2:1)),this.month=4*n+t,this.bodyType="DAYS",this.setHeaderContent(),this.setupBody()},r.prototype.onYearSelected=function(e){this.year=parseInt(e.target.innerText),this.bodyType="MONTHS",this.setHeaderContent(),this.setupBody()},r.prototype.onHeaderChange=function(t){var n=t.target;if(n.previousSibling&&n.nextSibling){var i=e.indexOf(this.bodyType);if(i<0||!e[i+1])return;this.bodyType=e[i+1],this.setupBody()}else{var r=n.previousSibling?1:-1;switch(this.bodyType){case"DAYS":this.month+=1*r;break;case"MONTHS":this.year+=1*r;break;case"YEARS":this.year+=10*r}(this.month>11||this.month<0)&&(this.year+=Math.floor(this.month/11),this.month=this.month>11?0:11)}this.setHeaderContent(),this.setBodyContent()},l.prototype.add=function(e,t){this._funcs[e]||(this._funcs[e]=[]),this._funcs[e].push(t)},l.prototype.get=function(e){return this._funcs[e]?this._funcs[e]:[]},window.dtsel=Object.create({},{DTS:{value:i},DTObj:{value:r},fn:{value:Object.defineProperties({},{empty:{value:s},appendAfter:{value:function(e,t){t.parentNode.insertBefore(e,t.nextSibling)}},getOffset:{value:a},parseDate:{value:u},renderDate:{value:c},parseTime:{value:h},renderTime:{value:p},setDefaults:{value:m}})}})}();